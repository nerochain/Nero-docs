import PageFeedback from '../../../components/PageFeedback'

# AA Platform: Managing Your Account Abstraction Services

The Nerochain AA Platform is a powerful web-based dashboard that allows developers to manage their Account Abstraction services, create API keys, configure gas sponsorship strategies, and monitor usage. This guide will walk you through using the platform effectively.

## Getting Started

### Accessing the Platform

The AA Platform is available at [https://aa-platform.nerochain.io](https://aa-platform.nerochain.io). You'll need to:

1. Connect your wallet (MetaMask or other Web3 wallet)

<div className="mt-8 mb-8">
  <figure className="text-center">
    <img 
      src="/assets/aaPlatform/gifs/Loginaa.gif" 
      alt="AA Platform Login Screen"
      className="mx-auto rounded-lg shadow-md"
    />
  </figure>
</div>

### Creating a Team

After logging in:

1. Click on "Create New Team"
2. Enter your project name, description, and website URL

<div className="mt-8 mb-8">
  <figure className="text-center">
    <img 
      src="/assets/aaPlatform/gifs/create1.gif" 
      alt="AA Platform Team Creation 1 Screen"
      className="mx-auto rounded-lg shadow-md"
    />
  </figure>
</div>

3. The first time will trigger creating a first API Key, so select between the Nerochain options now (e.g., Nerochain Testnet, Mainnet)
4. Click "Create ApiKey"

<div className="mt-8 mb-8">
  <figure className="text-center">
    <img 
      src="/assets/aaPlatform/gifs/create2.gif" 
      alt="AA Platform Team Creation 2 Screen"
      className="mx-auto rounded-lg shadow-md"
    />
  </figure>
</div>

Each team will have its own dashboard, API keys, and configurations.

<div className="mt-8 mb-8">
  <figure className="text-center">
    <img 
      src="/assets/aaPlatform/gifs/dash.gif" 
      alt="AA Platform Team Creation 2 Screen"
      className="mx-auto rounded-lg shadow-md"
    />
  </figure>
</div>

### Managing Team Members

#### Adding

You can add multiple users as team members of your team following the steps:

1. Go to the Team Tab, and click in the "Invite" button.
2. Add user by setting their name and email, and a email will be sent to them. 
3. Press the confirm button to send the invite. 

<div className="mt-8 mb-8">
  <figure className="text-center">
    <img 
      src="/assets/aaPlatform/gifs/addmember.gif" 
      alt="Adding team member"
      className="mx-auto rounded-lg shadow-md"
    />
  </figure>
</div>

> **_NOTE:_**  Teams can have three kinds of roles: Owner, Admin or Colleagues. Colleagues only have reading access, while Admins and Owners have write access. But only owners can delete an API key.

## Managing API Keys

API keys are essential for authenticating your applications with the Paymaster service.

### Creating an API Key

1. Navigate to your project dashboard
2. Go to the "API Keys" tab
3. Click "Create"
4. Select between Testnet or Mainnet
5. Click on "Create ApiKey"

<div className="mt-8 mb-8">
  <figure className="text-center">
    <img 
      src="/assets/aaPlatform/gifs/createapi.gif" 
      alt="AA Platform Team Creation 2 Screen"
      className="mx-auto rounded-lg shadow-md"
    />
  </figure>
</div>

### API Key Security

Your API keys grant access to your gas sponsorship resources. To keep them secure:

- Never expose API keys in client-side code
- Use environment variables to store keys in your backend
- Implement domain restrictions for production keys
- Rotate keys periodically
- Set appropriate usage limits

## Configuring Policies

Policies determine how your application handles transaction fees for users. There are four main configurations to consider:

- Enabling ERC20 Payments
- Discounts per Address
- Offers for all addresses
- Specify Callbacks

### Enabling ERC20 Payments

1. Go to the "API Keys" tab and select the desired APIKey to configure
2. Click in the "Policies" tab
3. Click on the ERC-20 Payment toggle
4. Select Between the Payment modes: Pre-Payment and Post Payment or only Pre-Payment

<div className="mt-8 mb-8">
  <figure className="text-center">
    <img 
      src="/assets/aaPlatform/gifs/erc20.gif" 
      alt="Configuring a Gas Policy"
      className="mx-auto rounded-lg shadow-md"
    />
  </figure>
</div>

#### Selecting tokens that supports Gas Payment
Here you can select any ERC20 token you wish to receive as Payment for Gas. 

1. Click on the "Select" button
2. Select the tokens on the list or Input a Token contract in the text field to make it appear on the list
3. "Confirm" your selection
4. Configure the Gas-Payment Floating rate.
5. Click in the "Save" button at the end of the dashboard.

<div className="mt-8 mb-8">
  <figure className="text-center">
    <img 
      src="/assets/aaPlatform/gifs/erc20config.gif" 
      alt="Configuring a Gas Policy"
      className="mx-auto rounded-lg shadow-md"
    />
  </figure>
</div>

#### Strategy Types Explained

##### Free Gas (Type 0)

With this strategy, you fully cover the gas costs for your users. This is ideal for:
- Onboarding new users who don't own crypto
- Promotional campaigns
- Applications where you want to remove all friction
- GameFi applications where you want to hide blockchain complexity

##### ERC20 Prepay (Type 1)

Users pay for gas using ERC20 tokens before the transaction is executed:
- The full estimated amount is collected upfront
- Any excess is refunded after execution
- More secure for the developer as payment is guaranteed
- Better suited for high-value operations

##### ERC20 Postpay (Type 2)

Users pay for gas using ERC20 tokens after the transaction is executed:
- Only the exact gas cost is collected
- Requires token approval before execution
- Slightly better UX as users only pay what's needed
- Has a risk of payment failure after execution


### Giving Discounts per Address

You can configure the total USD or native tokens you are willing to sponsor per address.

1. On the Policies tab, toggle the "Discount per address" option
2. Configure the amount of times per address per day, week , or month modes.
3. Maximum free amount per new address : you can use this to set a total limit you can sponsor per address
4. You can also set the amount of overral free times an address can be sponsored. 
5. Click on the "Save" button.

<div className="mt-8 mb-8">
  <figure className="text-center">
    <img 
      src="/assets/aaPlatform/gifs/discount.gif" 
      alt="Configuring Discounts"
      className="mx-auto rounded-lg shadow-md"
    />
  </figure>
</div>

### Offers for all addresses

You can also have a similar configuration configured for all address at the same time.

1. On the Policies tab, toggle the "All Addresses offer" option
2. Configure the amount of times per address per day, week , or month modes.
3. Maximum free amount per new address : you can use this to set a total limit you can sponsor per address
4. You can also set the amount of overral free times an address can be sponsored. 
5. Click on the "Save" button.

<div className="mt-8 mb-8">
  <figure className="text-center">
    <img 
      src="/assets/aaPlatform/gifs/alldiscount.gif" 
      alt="Configuring Discounts for all addresses"
      className="mx-auto rounded-lg shadow-md"
    />
  </figure>
</div>

### Specify Callbacks

You can set specific addresses wheter a user operation should be sponsored or not.

1. Toggle the "Specify Callback" option.
2. Set the address
3. Save

## Payment Manageemnt

### Balance Management Features

<div className="mt-8 mb-8">
  <figure className="text-center">
    <img 
      src="/assets/aaPlatform/figure10.png" 
      alt="Payment Overview"
      className="mx-auto rounded-lg shadow-md"
    />
  </figure>
</div>


#### Remaining Request
- Displays the number of remaining requests that Paymaster can process.
- To increase the number of requests, please contact NERO.

> **_NOTE:_**  If your API have 0 remaining requests, it means that even if your have enough funds, it won't be able to process any further requests. 

#### Remaining sponsor NERO balance
- Display the current NERO balance.
- Use the “Add” button to increase NERO.

> **_NOTE:_**  Adding NERO here means the funds your API will use to pay for the Gas of your application requests.  

#### Token Balance Table

The token balance table shows all the balances your API have. Primarly it shows the NERO Token balance, but it will also show the balance for any token that is configured as avaliable to be paid as Gas. When the users of your application starts to pay Gas in any token you configured, you will see the balance being changed in this table.

##### Adding Funds

To add NERO tokens to your APIKey, follow the steps:

1. Click in the Add button
2. Input amount of NERO to add.
3. Click "Confirm" to start processing the transaction.
4. Check the balance after a while.

<div className="mt-8 mb-8">
  <figure className="text-center">
    <img 
      src="/assets/aaPlatform/gifs/deposit.gif" 
      alt="Payment Overview"
      className="mx-auto rounded-lg shadow-md"
    />
  </figure>
</div>

> **_NOTE:_**  If the value in the dashboard doesn't update, refresh it a few times.


##### Withdrawing Funds

To Withdraw any fund tokens from your APIKey, follow the steps:

1. Click in the "withdraw" icon on the funds table on the line of the token you want to withdraw. 
2. Input amount of the token to withdraw.
3. Click "Confirm" to start processing the transaction.
4. Check the balance after a while.

<div className="mt-8 mb-8">
  <figure className="text-center">
    <img 
      src="/assets/aaPlatform/gifs/withdraw.gif" 
      alt="Payment Overview"
      className="mx-auto rounded-lg shadow-md"
    />
  </figure>
</div>

> **_NOTE:_**  If the value in the dashboard doesn't update, refresh it a few times.


## Integration with Your Application

Once you've configured your API keys and strategies, integrate them into your application:

```typescript
// Configure your paymaster in your application
builder.setPaymasterOptions({
  apikey: "YOUR_API_KEY_FROM_PLATFORM",
  rpc: "https://paymaster-testnet.nerochain.io",
  type: 0 // Use your configured strategy type
});
```

## Best Practices

1. **Start with Limits**: Begin with conservative gas and usage limits until you understand your application's patterns.
2. **Monitor Regularly**: Check your dashboard frequently to spot unusual activity.
3. **Multiple Strategies**: Create different strategies for different user actions or user tiers.
4. **Separate Development Keys**: Use separate API keys for development and production.
5. **Maintain Adequate Funding**: For sponsored transactions, always keep sufficient funds in your account.

## Troubleshooting

### Common Issues

- **API Key Rate Limiting**: If you're seeing rate limit errors, check your key's usage patterns and consider increasing limits.
- **Strategy Rejection**: If transactions are being rejected, verify that your strategy parameters match your application's needs.
- **Insufficient Funds**: Ensure your sponsorship account is adequately funded for Type 0 strategies.
- **User Payment Failure**: For Type 1/2 strategies, ensure users have sufficient token balances and have approved the paymaster contract.

<PageFeedback path="/en/developer-tools/aa-platform-usage" /> 